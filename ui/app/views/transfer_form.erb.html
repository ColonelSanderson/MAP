<div class="row vue-enabled">
    <% if errors %>
    <pre><%= errors %></pre>
    <% end %>
    <div class="col s12">
        <div class="row">
            <div class="col s12">
                <ul class="status-infomatic">
                    <li class="first <% if transfer.fetch('checklist_status', '') == 'TRANSFER_PROPOSAL_APPROVED' %>current<% end %>">Transfer Proposal Approved</li>
                    <li class="<% if transfer.fetch('checklist_status', '') == 'METADATA_RECEIVED' %>current<% end %>">Metadata Received</li>
                    <li class="<% if transfer.fetch('checklist_status', '') == 'RAP_NOTICE_RECEIVED' %>current<% end %>">RAP Notice Received/<br>Exempt</li>
                    <li class="<% if transfer.fetch('checklist_status', '') == 'METADATA_APPROVED' %>current<% end %>">Metadata Approved</li>
                    <li class="<% if transfer.fetch('checklist_status', '') == 'TRANSFER_RECEIVED' %>current<% end %>">Transfer Received</li>
                    <li class="last <% if transfer.fetch('checklist_status', '') == 'METADATA_IMPORTED' %>current<% end %>">Metadata Imported</li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col s12">
                <ul class="status-infomatic">
                    <li class="first <% if transfer.fetch('status', '') == 'TRANSFER_PROCESS_INITIATED' %>current<% end %>">Transfer Process Initiated</li>
                    <li class="empty"></li>
                    <li class="<% if transfer.fetch('status', '') == 'PENDING' %>current<% end %>">Pending</li>
                    <li class="<% if transfer.fetch('status', '') == 'RAP_NOTICE_RECEIVED' %>current<% end %>">RAP Notice Received/<br>Exempt</li>
                    <li class="<% if transfer.fetch('status', '') == 'IN_PROGRESS' %>current<% end %>">In Progress</li>
                    <li class="last <% if transfer.fetch('status', '') == 'COMPLETE' %>current<% end %>">Complete</li>
                </ul>
            </div>
        </div>
    </div>
    <form id="transferProposalForm" class="col s12" <% if is_readonly %>disabled<% else %>action="/transfers/update" method="post"<% end %>>
        <%== FormHelper.hidden_authenticity_token %>

        <input type="hidden" name="transfer[id]" value="<%= transfer.fetch('id') %>">

        <div class="row">
            <div class="input-field col s12">
                <input id="title" type="text" value="<%= transfer.fetch('title', '') %>" required disabled>
                <label for="title">Title</label>
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12">
                <input id="date_scheduled" type="text" value="<%= transfer.fetch('date_scheduled', '') %>" required disabled>
                <label for="date_scheduled">Scheduled Date</label>
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12">
                <input id="date_received" type="text" value="<%= transfer.fetch('date_received', '') %>" required disabled>
                <label for="date_received">Transfer Received Date</label>
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12">
                <input id="quantity_received" type="text" value="<%= transfer.fetch('quantity_received', '') %>" required disabled>
                <label for="quantity_received">Quantity Received</label>
            </div>
        </div>

        <div class="row">
            <div class="col s12">
                <file-uploader files="<%= transfer.fetch('files', []).to_json %>"
                               input_path="transfer[files][]"
                               readonly="<%= is_readonly %>"
                               role="enabled"
                               v-bind:submit_button_ids="['save_transfer_btn']"
                               csrf_token="<%= FormHelper.csrf_token %>">
                </file-uploader>
            </div>
        </div>

        <% unless is_readonly %>
            <div class="row">
                <br>
                <br>
                <div class="col s12">
                    <button id="save_transfer_btn" class="btn">Save Transfer</button>
                </div>
            </div>
        <% end %>
    </form>
</div>
<% unless transfer.new? %>
    <div class="row vue-enabled">
        <div class="col s12">
            <conversation record_type="transfer"
                          id="<%= transfer.fetch('handle_id') %>"
                          csrf_token="<%= FormHelper.csrf_token %>">
            </conversation>
        </div>
    </div>
<% end %>
